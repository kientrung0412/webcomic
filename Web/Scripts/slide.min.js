$(document).ready(function(){LoadBg();$(".owl-carousel").owlCarousel({loop:true,autoplay:true,margin:10,autohide:true,responsive:{0:{items:2},575:{items:3},991:{items:5}}});$("#show-category").click(function(){$(".list-category").stop().slideToggle(300);event.stopPropagation()});$(".navbar-toggler").click(function(){$(".list-category").stop().slideUp(300)});$(window).click(function(){$(".list-category").stop().slideUp(300)});var g=$("#top-nav");$(document).scroll(function(){var i=$(window).scrollTop();if(i>0){g.addClass("p-fix").delay("slow")}else{g.removeClass("p-fix").delay("slow")}});var d=1;function b(){var k=new Array();var j=new Array();var o=$("#name-seach").val();var n=$("#author-seach").val();var m=$("#nation-search").children("option:selected").val();var i=$("#status-search").children("option:selected").val();var l=$("#sort-seach").children("option:selected").val();$(".category-search").each(function(){var q=$(this).val();var p=$(this).attr("data-check");switch(p){case"1":k.push(q);break;case"-1":j.push(q);break}});$.ajax({url:"/Comic/Test",method:"GET",dataType:"JSON",traditional:true,data:{arrayIn:k,arrayNotIn:j,nameComic:o,status:i,author:n,nation:m,sort:l,page:d},success:function(q){if(d==1){$(".ajax-show").empty()}var p=this.url;p=p.replace("Test?","SearchAdvanced?");history.pushState("","Search",p);url=$(this).attr("href");history.pushState({key:url},"",url);if(q.PageSize-1<d){$(".more-comic").hide("slow")}else{$(".more-comic").show("slow")}$(q.Comics).each(function(t,r){var w="";if(r.chapters.length>0){var s=r.chapters[r.chapters.length-1];var u=s.ChapterId;var v=s.NameChapter;w='<div class="new-chapter"><a href="/Comic?comicId=1"></a><a href="/Chapter?chapterId='+u+'">'+v+"</a></div>"}$(".ajax-show").append('<div class="col-sm-3 col-6"><div class="comic-item"><a href="/Comic?comicId='+r.ComicId+'"><div class="item-main"><div class="img-cover"><div class="img-bg bg-img-full" url-bg="'+r.CommicBanner+'" ></div></div>'+w+'</div></a><div class="name-comic text-light"><a href="/Comic?comicId=10">'+r.NameComic+"</a></div></div></div>")});LoadBg()}})}var c=$(".check");c.change(function(){$(".ajax-show").empty();var i=$(this).children("input").attr("data-check");switch(i){case"0":$(this).children("input").attr("data-check","1");break;case"1":$(this).children("input").attr("data-check","-1");break;case"-1":$(this).children("input").attr("data-check","0");break}d=1;setTimeout(b(),2000)});$("#name-seach").stop().keyup(function(){$(".ajax-show").empty();d=1;setTimeout(b(),2000)});$("#author-seach").stop().keyup(function(){$(".ajax-show").empty();d=1;setTimeout(b(),2000)});$("#name-seach").stop().change(function(){$(".ajax-show").empty();d=1;setTimeout(b(),2000)});$("#status-search").stop().change(function(){$(".ajax-show").empty();d=1;setTimeout(b(),2000)});$("#sort-seach").stop().change(function(){$(".ajax-show").empty();d=1;setTimeout(b(),2000)});$("#page-search").click(function(){d++;setTimeout(b(),2000)});function a(){var i=$("select[name = sort]").attr("select");$("select[name = sort]").children("option").each(function(){if(i==$(this).val()){$(this).attr("selected","selected")}})}a();$(".more").click(function(){$(".more").siblings(".form-search").stop().toggleClass("max-h-370");$(".more").remove()});if($("#read-chapter").hasClass("ok")){$("#top-nav").css("position","unset")}$("#menu-toggle").click(function(i){i.preventDefault();$("#wrapper").toggleClass("toggled")});$("#requestcomic").click(function(){Update()});$(window).keydown(function(i){if(i.which==37){$("#back").trigger("click")}});$(window).scroll(function(){let start=$(window).scrollTop();setTimeout(function(){let end=$(window).scrollTop();console.log(start-end);if(start-end<0){$("#nav-bottom").slideUp(100)}else{$("#nav-bottom").slideDown(100)}},200)});$("#menu").click(function(){h()});function h(){$(".list-read-chapter").stop().toggleClass("active")}function f(){$(window).scroll(function(){let e=$(window).scrollTop();if(e>300){$(".btn-top").show(300)}else{$(".btn-top").hide(300)}});$(".btn-top").click(function(){$("body,html").animate({scrollTop:0})})}f()});